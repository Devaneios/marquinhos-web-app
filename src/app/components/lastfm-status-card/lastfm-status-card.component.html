<app-base-card>
  <mat-chip
    highlighted
    [color]="
      !registered
        ? registerStatusMessage !== null
          ? 'warn'
          : 'error'
        : 'primary'
    "
  >
    <mat-icon
      *ngIf="!registered && registerStatusMessage !== null"
      matChipAvatar
      >error</mat-icon
    >
    <mat-icon *ngIf="registered && registerStatusMessage !== null" matChipAvatar
      >verified</mat-icon
    >
    <mat-icon
      *ngIf="!registered && registerStatusMessage === null"
      matChipAvatar
      >hourglass_empty</mat-icon
    >
    <h2>{{ registerStatusMessage ?? 'Verificando o registro' }}</h2>
  </mat-chip>
  <button
    *ngIf="!registered && registerStatusMessage !== null"
    mat-raised-button
    color="accent"
    (click)="registerClick.emit()"
  >
    Conectar Last.fm
  </button>
  <button
    *ngIf="registered"
    mat-raised-button
    color="primary"
    (click)="storyClick.emit()"
  >
    Crie o seu Story!
  </button>

  <mat-slide-toggle
    class="scrobble-toggle"
    *ngIf="registered"
    (change)="scrobbleChange.emit()"
    [disabled]="scrobbleToggleDisabled"
    [checked]="scrobblesOn"
    >Scrobbles on!</mat-slide-toggle
  >
</app-base-card>
